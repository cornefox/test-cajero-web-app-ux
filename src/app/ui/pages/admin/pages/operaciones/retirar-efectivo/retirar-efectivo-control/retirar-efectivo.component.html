<div class="animate__animated animate__fadeInRight">
  <div class="app-container">
    <div class="atm-retiro">
      <div class="atm-retiro__icon">
        <i class="pi pi-wallet"></i>
      </div>
      <h2 class="atm-retiro__title">Retirar Efectivo</h2>
      <form class="atm-retiro__form" [formGroup]="myForm" (ngSubmit)="calcularRetiro()" autocomplete="off">
        <div class="atm-retiro__campo">
          <label class="atm-retiro__campo-label" for="valueMonto">Monto a Retirar</label>
          <input class="atm-retiro__campo-input" type="text" formControlName="valueMonto" [ngClass]="{
                'atm-retiro__campo-input--error':
                  myForm.controls['valueMonto'].invalid && myForm.controls['valueMonto'].touched
              }" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1')" />

          @if (myForm.controls['valueMonto'].invalid && myForm.controls['valueMonto'].touched) {
          <div class="atm-retiro__campo-error">
            {{ formUtils.getFieldError(myForm, 'valueMonto') }}
          </div>
          }
        </div>
        <button class="atm-retiro__button" type="submit">
          Calcular
        </button>
      </form>
      <p class="atm-retiro__message">
        Efectivo restante en el cajero:
        <strong>{{ obtenerEfectivoRestante() | currency: 'MXN' }}</strong>
      </p>
    </div>
  </div>
</div>
@if (cantidadDenominacion().length > 0) {
  <div class="animate__animated animate__fadeInRight">
    <div class="atm-retiro-resultado-panel">
      <h4 class="atm-retiro-resultado-panel__title">
        Billetes y Monedas a Entregar:
      </h4>
      <ul class="atm-retiro-resultado-panel__lista">
        @for(item of cantidadDenominacion(); track $index) {
          <li  class="atm-retiro-resultado-panel__item">
            {{ item.denominacion }} x {{ item.cantidad }}
          </li>
        }
      </ul>
    </div>
  </div>
}
